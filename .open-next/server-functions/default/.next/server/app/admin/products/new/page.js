(()=>{var e={};e.id=573,e.ids=[573],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},6116:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>c}),t(6002),t(4866),t(1478),t(9198);var r=t(170),s=t(5002),i=t(3876),n=t.n(i),l=t(6299),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(a,d);let c=["",{children:["admin",{children:["products",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6002)),"C:\\Users\\Field\\Desktop\\MAVARIX\\src\\app\\admin\\products\\new\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,4866)),"C:\\Users\\Field\\Desktop\\MAVARIX\\src\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,1478)),"C:\\Users\\Field\\Desktop\\MAVARIX\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,9198)),"C:\\Users\\Field\\Desktop\\MAVARIX\\src\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["C:\\Users\\Field\\Desktop\\MAVARIX\\src\\app\\admin\\products\\new\\page.tsx"],m="/admin/products/new/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/products/new/page",pathname:"/admin/products/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3879:(e,a,t)=>{Promise.resolve().then(t.t.bind(t,4080,23)),Promise.resolve().then(t.bind(t,78))},5162:(e,a,t)=>{Promise.resolve().then(t.bind(t,1650))},4178:(e,a,t)=>{"use strict";var r=t(5289);t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},1650:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var r=t(7247),s=t(8964),i=t(4178),n=t(6155);function l(){let e=(0,i.useRouter)(),a=(0,s.useRef)(null),[t,l]=(0,s.useState)(!1),[d,c]=(0,s.useState)(""),[o,m]=(0,s.useState)(""),[u,x]=(0,s.useState)(""),[p,h]=(0,s.useState)(""),[v,b]=(0,s.useState)(!1),[y,g]=(0,s.useState)(!1),[f,j]=(0,s.useState)(!1),[N,k]=(0,s.useState)([]),[w,C]=(0,s.useState)([]),[D,P]=(0,s.useState)(!1),[A,M]=(0,s.useState)({name:"",description:"",price:"",stock:"",category:"",carModel:"",carYear:""}),S=async e=>{let a=e.target.files;if(a&&0!==a.length){P(!0);for(let e=0;e<a.length;e++){let t=a[e],r=new FileReader;r.onload=e=>{C(a=>[...a,e.target?.result])},r.readAsDataURL(t);let s=new FormData;s.append("file",t);try{let e=await fetch("/api/upload",{method:"POST",body:s}),a=await e.json();a.success?k(e=>[...e,a.imageUrl]):alert("อัปโหลดรูปไม่สำเร็จ")}catch{alert("เกิดข้อผิดพลาดในการอัปโหลด")}}P(!1)}},R=e=>{k(a=>a.filter((a,t)=>t!==e)),C(a=>a.filter((a,t)=>t!==e))},q=async a=>{a.preventDefault(),l(!0);let t=n.EK.find(e=>e.id===d),r=v?o:t?.name||"",s=y?u:A.carModel,i=f?p:A.category;try{let a=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...A,price:Number(A.price),stock:Number(A.stock),carBrand:r,carModel:s,category:i,imageUrl:N[0]||"",images:N})}),t=await a.json();t.success?(alert("เพิ่มสินค้าเรียบร้อยแล้ว!"),e.push("/admin"),e.refresh()):alert("เกิดข้อผิดพลาด: "+t.error)}catch{alert("เกิดข้อผิดพลาด กรุณาลองใหม่")}finally{l(!1)}},_=n.EK.find(e=>e.id===d);return(0,r.jsxs)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-[var(--text-primary)]",children:"เพิ่มสินค้าใหม่"}),r.jsx("p",{className:"text-[var(--text-secondary)] mt-1",children:"กรอกข้อมูลสินค้าด้านล่าง"})]}),(0,r.jsxs)("form",{onSubmit:q,className:"bg-white rounded-2xl border border-[var(--border)] p-6 md:p-8",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"รูปภาพสินค้า (เลือกได้หลายรูป)"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3 mb-3",children:[w.map((e,a)=>(0,r.jsxs)("div",{className:"relative w-24 h-24 rounded-xl overflow-hidden border-2 border-[var(--border)]",children:[r.jsx("img",{src:e,alt:`Preview ${a+1}`,className:"w-full h-full object-cover"}),r.jsx("button",{type:"button",onClick:()=>R(a),className:"absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full text-xs hover:bg-red-600",children:"✕"}),N[a]&&r.jsx("div",{className:"absolute bottom-1 left-1 w-5 h-5 bg-green-500 text-white rounded-full text-xs flex items-center justify-center",children:"✓"})]},a)),r.jsx("div",{onClick:()=>a.current?.click(),className:"w-24 h-24 rounded-xl border-2 border-dashed border-[var(--border)] flex items-center justify-center cursor-pointer hover:border-[var(--primary)] transition-colors bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("span",{className:"text-2xl",children:"➕"}),r.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"เพิ่มรูป"})]})})]}),r.jsx("input",{ref:a,type:"file",accept:"image/*",multiple:!0,onChange:S,className:"hidden"}),D&&r.jsx("p",{className:"text-sm text-[var(--primary)]",children:"⏳ กำลังอัปโหลด..."})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"ชื่อสินค้า *"}),r.jsx("input",{type:"text",required:!0,value:A.name,onChange:e=>M({...A,name:e.target.value}),className:"input-field",placeholder:"เช่น กรองอากาศ Toyota Camry"})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"รายละเอียด"}),r.jsx("textarea",{rows:4,value:A.description,onChange:e=>M({...A,description:e.target.value}),className:"input-field resize-none",placeholder:"รายละเอียดสินค้า..."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"ราคา (บาท) *"}),r.jsx("input",{type:"number",required:!0,min:"0",value:A.price,onChange:e=>M({...A,price:e.target.value}),className:"input-field",placeholder:"0"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"จำนวนสต็อก"}),r.jsx("input",{type:"number",min:"0",value:A.stock,onChange:e=>M({...A,stock:e.target.value}),className:"input-field",placeholder:"0"})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"หมวดหมู่ *"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("input",{type:"checkbox",id:"customCategory",checked:f,onChange:e=>j(e.target.checked),className:"w-4 h-4"}),r.jsx("label",{htmlFor:"customCategory",className:"text-sm text-[var(--text-secondary)]",children:"พิมพ์หมวดหมู่เอง"})]}),f?r.jsx("input",{type:"text",required:!0,value:p,onChange:e=>h(e.target.value),className:"input-field",placeholder:"พิมพ์หมวดหมู่ใหม่..."}):(0,r.jsxs)("select",{required:!0,value:A.category,onChange:e=>M({...A,category:e.target.value}),className:"input-field",children:[r.jsx("option",{value:"",children:"เลือกหมวดหมู่"}),n.bd.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.icon," ",e.name]},e.id))]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"ยี่ห้อรถ *"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("input",{type:"checkbox",id:"customBrand",checked:v,onChange:e=>{b(e.target.checked),e.target.checked&&g(!0)},className:"w-4 h-4"}),r.jsx("label",{htmlFor:"customBrand",className:"text-sm text-[var(--text-secondary)]",children:"พิมพ์ยี่ห้อเอง"})]}),v?r.jsx("input",{type:"text",required:!0,value:o,onChange:e=>m(e.target.value),className:"input-field",placeholder:"พิมพ์ยี่ห้อรถใหม่..."}):(0,r.jsxs)("select",{required:!0,className:"input-field",value:d,onChange:e=>c(e.target.value),children:[r.jsx("option",{value:"",children:"เลือกยี่ห้อ"}),n.EK.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"รุ่นรถ *"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("input",{type:"checkbox",id:"customModel",checked:y,onChange:e=>g(e.target.checked),className:"w-4 h-4",disabled:v}),r.jsx("label",{htmlFor:"customModel",className:"text-sm text-[var(--text-secondary)]",children:"พิมพ์รุ่นเอง"})]}),y?r.jsx("input",{type:"text",required:!0,value:u,onChange:e=>x(e.target.value),className:"input-field",placeholder:"พิมพ์รุ่นรถใหม่..."}):(0,r.jsxs)("select",{required:!0,value:A.carModel,onChange:e=>M({...A,carModel:e.target.value}),className:"input-field",disabled:!d,children:[r.jsx("option",{value:"",children:"เลือกรุ่น"}),_?.models.map(e=>r.jsx("option",{value:e.name,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("label",{className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"ปีรถ"}),r.jsx("input",{type:"text",value:A.carYear,onChange:e=>M({...A,carYear:e.target.value}),className:"input-field",placeholder:"เช่น 2018-2024"})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[r.jsx("button",{type:"button",onClick:()=>e.back(),className:"px-6 py-3 rounded-xl border-2 border-[var(--border)] text-[var(--text-secondary)] hover:bg-gray-50 transition-colors",children:"ยกเลิก"}),r.jsx("button",{type:"submit",disabled:t||D,className:"flex-1 btn-primary disabled:opacity-50",children:t?"กำลังบันทึก...":"บันทึกสินค้า"})]})]})]})}},78:(e,a,t)=>{"use strict";t.d(a,{default:()=>i});var r=t(7247),s=t(4178);function i(){let e=(0,s.useRouter)(),a=async()=>{await fetch("/api/auth/logout",{method:"POST"}),e.push("/"),e.refresh()};return r.jsx("button",{onClick:a,className:"text-sm px-4 py-2 rounded-lg bg-red-50 text-red-600 hover:bg-red-100 transition-colors",children:"ออกจากระบบ"})}},6155:(e,a,t)=>{"use strict";t.d(a,{EK:()=>s,bd:()=>r});let r=[{id:"engine",name:"เครื่องยนต์",icon:"⚙️",count:24},{id:"electrical",name:"ระบบไฟฟ้า",icon:"⚡",count:18},{id:"suspension",name:"ช่วงล่าง",icon:"\uD83D\uDD27",count:15},{id:"brake",name:"ระบบเบรค",icon:"\uD83D\uDED1",count:12},{id:"body",name:"ตัวถังและกระจก",icon:"\uD83D\uDE97",count:20},{id:"interior",name:"ภายในห้องโดยสาร",icon:"\uD83D\uDCBA",count:16},{id:"cooling",name:"ระบบระบายความร้อน",icon:"❄️",count:10},{id:"transmission",name:"ระบบส่งกำลัง",icon:"\uD83D\uDD29",count:8}],s=[{id:"toyota",name:"Toyota",models:[{id:"camry",name:"Camry",years:["2018","2019","2020","2021","2022","2023","2024"]},{id:"corolla",name:"Corolla Altis",years:["2018","2019","2020","2021","2022","2023","2024"]},{id:"yaris",name:"Yaris",years:["2018","2019","2020","2021","2022","2023","2024"]},{id:"hilux",name:"Hilux Revo",years:["2018","2019","2020","2021","2022","2023","2024"]},{id:"fortuner",name:"Fortuner",years:["2018","2019","2020","2021","2022","2023","2024"]}]},{id:"honda",name:"Honda",models:[{id:"civic",name:"Civic",years:["2018","2019","2020","2021","2022","2023","2024"]},{id:"accord",name:"Accord",years:["2018","2019","2020","2021","2022","2023","2024"]},{id:"city",name:"City",years:["2018","2019","2020","2021","2022","2023","2024"]},{id:"crv",name:"CR-V",years:["2018","2019","2020","2021","2022","2023","2024"]},{id:"hrv",name:"HR-V",years:["2018","2019","2020","2021","2022","2023","2024"]}]},{id:"mazda",name:"Mazda",models:[{id:"mazda2",name:"Mazda 2",years:["2018","2019","2020","2021","2022","2023","2024"]},{id:"mazda3",name:"Mazda 3",years:["2018","2019","2020","2021","2022","2023","2024"]},{id:"cx3",name:"CX-3",years:["2018","2019","2020","2021","2022","2023","2024"]},{id:"cx5",name:"CX-5",years:["2018","2019","2020","2021","2022","2023","2024"]}]},{id:"isuzu",name:"Isuzu",models:[{id:"dmax",name:"D-Max",years:["2018","2019","2020","2021","2022","2023","2024"]},{id:"mux",name:"MU-X",years:["2018","2019","2020","2021","2022","2023","2024"]}]},{id:"ford",name:"Ford",models:[{id:"ranger",name:"Ranger",years:["2018","2019","2020","2021","2022","2023","2024"]},{id:"everest",name:"Everest",years:["2018","2019","2020","2021","2022","2023","2024"]}]},{id:"nissan",name:"Nissan",models:[{id:"almera",name:"Almera",years:["2018","2019","2020","2021","2022","2023","2024"]},{id:"navara",name:"Navara",years:["2018","2019","2020","2021","2022","2023","2024"]},{id:"kicks",name:"Kicks",years:["2020","2021","2022","2023","2024"]}]}]},4866:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var r=t(2051),s=t(2349),i=t(3275);let n=(0,t(5347).createProxy)(String.raw`C:\Users\Field\Desktop\MAVARIX\src\components\LogoutButton.tsx#default`);async function l({children:e}){let a=await (0,i.$)();return(0,r.jsxs)("div",{className:"min-h-screen bg-[var(--background)]",children:[a&&r.jsx("header",{className:"bg-white border-b border-[var(--border)] sticky top-16 z-40",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-14",children:[(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[r.jsx("span",{className:"font-semibold text-[var(--primary)]",children:"\uD83D\uDEE0️ Admin Panel"}),(0,r.jsxs)("nav",{className:"hidden md:flex items-center gap-4",children:[r.jsx(s.default,{href:"/admin",className:"text-sm text-[var(--text-secondary)] hover:text-[var(--primary)] transition-colors",children:"Dashboard"}),r.jsx(s.default,{href:"/admin/products",className:"text-sm text-[var(--text-secondary)] hover:text-[var(--primary)] transition-colors",children:"จัดการสินค้า"}),r.jsx(s.default,{href:"/admin/logs",className:"text-sm text-[var(--text-secondary)] hover:text-[var(--primary)] transition-colors",children:"Logs"})]})]}),r.jsx(n,{})]})})}),e]})}},6002:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>r});let r=(0,t(5347).createProxy)(String.raw`C:\Users\Field\Desktop\MAVARIX\src\app\admin\products\new\page.tsx#default`)},3275:(e,a,t)=>{"use strict";t.d(a,{$:()=>s});var r=t(2845);async function s(){let e=(await (0,r.cookies)()).get("admin_auth");return e?.value==="authenticated"}}};var a=require("../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[379,542,845,883],()=>t(6116));module.exports=r})();